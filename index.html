<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Sản phẩm - Nguyễn Thanh Phong - AIA Việt Nam</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Sản phẩm và giải pháp bảo hiểm ưu việt từ AIA Việt Nam, tư vấn bởi Nguyễn Thanh Phong.">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Secular+One&display=swap">
  <style>
    body {
      font-family: ui-sans-serif, system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Secular One",sans-serif;
      color:#222;
      background-color: #f9fafb; /* bg-gray-50 */
    }
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .accordion-header i {
        transition: transform 0.3s ease;
    }
    .accordion-header[aria-expanded="true"] i {
        transform: rotate(180deg);
    }
    .image-placeholder {
      position: relative;
    }
    /* Lightbox Styles */
    #lightbox-image.is-zoomed {
        cursor: grab;
    }
    #lightbox-image.is-dragging {
        cursor: grabbing;
    }
  </style>
</head>
<body class="antialiased min-h-screen bg-gray-50">

  <main class="py-12">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="mb-16">
        <h2 class="text-3xl lg:text-4xl font-bold text-red-600 mb-6">Sản phẩm và Giải pháp</h2>
        <p class="text-lg text-gray-600 max-w-3xl">
          Khám phá các giải pháp bảo hiểm toàn diện của AIA, được thiết kế để bảo vệ bạn và gia đình trước mọi rủi ro, đồng thời xây dựng một tương lai tài chính vững chắc.
        </p>
      </div>

      <!-- Company Intro Section -->
      <div class="mb-16">
        <h3 class="text-2xl lg:text-3xl font-bold text-red-600 mb-8 border-l-4 border-red-600 pl-4">Giới thiệu về AIA Việt Nam</h3>
        <div id="company-intro-image">
           <!-- Images loaded by JS -->
        </div>
      </div>

      <!-- Main Products Section -->
      <div class="mb-16">
        <h3 class="text-2xl lg:text-3xl font-bold text-red-600 mb-8 border-l-4 border-red-600 pl-4">Sản phẩm chính</h3>
        <div class="space-y-4" id="main-products-accordion">
          <div class="accordion-item bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <button class="accordion-header w-full flex justify-between items-center text-left p-5 text-lg font-semibold text-gray-800 hover:bg-red-50 focus:outline-none transition-colors" aria-expanded="false" aria-controls="main-prod-1"><span>1. BH Liên Kết Chung - AIA Khoẻ Trọn Vẹn - Bảo vệ dài lâu, tích lũy tối ưu</span><i class="ri-arrow-down-s-line"></i></button>
            <div id="main-prod-1" class="accordion-content"></div>
          </div>
          <div class="accordion-item bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <button class="accordion-header w-full flex justify-between items-center text-left p-5 text-lg font-semibold text-gray-800 hover:bg-red-50 focus:outline-none transition-colors" aria-expanded="false" aria-controls="main-prod-2"><span>2. BH Liên Kết Chung - AIA Khoẻ Bình An - Tối ưu bảo vệ tài chính</span><i class="ri-arrow-down-s-line"></i></button>
            <div id="main-prod-2" class="accordion-content"></div>
          </div>
          <div class="accordion-item bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <button class="accordion-header w-full flex justify-between items-center text-left p-5 text-lg font-semibold text-gray-800 hover:bg-red-50 focus:outline-none transition-colors" aria-expanded="false" aria-controls="main-prod-3"><span>3. BH Liên Kết Chung - AIA Vững Tương Lai - Cân bằng tích lũy và bảo vệ tài chính</span><i class="ri-arrow-down-s-line"></i></button>
            <div id="main-prod-3" class="accordion-content"></div>
          </div>
          <div class="accordion-item bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <button class="accordion-header w-full flex justify-between items-center text-left p-5 text-lg font-semibold text-gray-800 hover:bg-red-50 focus:outline-none transition-colors" aria-expanded="false" aria-controls="main-prod-4"><span>4. BH Tử Kỳ - An Bình Ưu Việt</span><i class="ri-arrow-down-s-line"></i></button>
            <div id="main-prod-4" class="accordion-content"></div>
          </div>
          <div class="accordion-item bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <button class="accordion-header w-full flex justify-between items-center text-left p-5 text-lg font-semibold text-gray-800 hover:bg-red-50 focus:outline-none transition-colors" aria-expanded="false" aria-controls="main-prod-5"><span>5. Trọn Tâm An - Gói sản phẩm bảo vệ sức khoẻ 10 năm</span><i class="ri-arrow-down-s-line"></i></button>
            <div id="main-prod-5" class="accordion-content"></div>
          </div>
        </div>
      </div>

      <!-- Rider Products Section -->
      <div>
        <h3 class="text-2xl lg:text-3xl font-bold text-red-600 mb-8 border-l-4 border-red-600 pl-4">Sản phẩm bán kèm</h3>
        <div class="space-y-4" id="rider-products-accordion">
          <div class="accordion-item bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <button class="accordion-header w-full flex justify-between items-center text-left p-5 text-lg font-semibold text-gray-800 hover:bg-red-50 focus:outline-none transition-colors" aria-expanded="false" aria-controls="rider-prod-1"><span>1. Thẻ sức khoẻ Bùng Gia Lực</span><i class="ri-arrow-down-s-line"></i></button>
            <div id="rider-prod-1" class="accordion-content"></div>
          </div>
          <div class="accordion-item bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <button class="accordion-header w-full flex justify-between items-center text-left p-5 text-lg font-semibold text-gray-800 hover:bg-red-50 focus:outline-none transition-colors" aria-expanded="false" aria-controls="rider-prod-2"><span>2. Bệnh hiểm nghèo 2.0</span><i class="ri-arrow-down-s-line"></i></button>
            <div id="rider-prod-2" class="accordion-content"></div>
          </div>
          <div class="accordion-item bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <button class="accordion-header w-full flex justify-between items-center text-left p-5 text-lg font-semibold text-gray-800 hover:bg-red-50 focus:outline-none transition-colors" aria-expanded="false" aria-controls="rider-prod-3"><span>3. Tai nạn</span><i class="ri-arrow-down-s-line"></i></button>
            <div id="rider-prod-3" class="accordion-content"></div>
          </div>
          <div class="accordion-item bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <button class="accordion-header w-full flex justify-between items-center text-left p-5 text-lg font-semibold text-gray-800 hover:bg-red-50 focus:outline-none transition-colors" aria-expanded="false" aria-controls="rider-prod-4"><span>4. Hỗ trợ viện phí</span><i class="ri-arrow-down-s-line"></i></button>
            <div id="rider-prod-4" class="accordion-content"></div>
          </div>
          <div class="accordion-item bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <button class="accordion-header w-full flex justify-between items-center text-left p-5 text-lg font-semibold text-gray-800 hover:bg-red-50 focus:outline-none transition-colors" aria-expanded="false" aria-controls="rider-prod-5"><span>5. Miễn thu phí 3.0</span><i class="ri-arrow-down-s-line"></i></button>
            <div id="rider-prod-5" class="accordion-content"></div>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <!-- Lightbox Modal -->
  <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50 hidden cursor-zoom-out" aria-hidden="true">
    <button id="lightbox-close" class="absolute top-4 right-6 text-white text-5xl font-bold z-50 leading-none hover:opacity-75" aria-label="Đóng">&times;</button>
    <div class="relative w-full h-full flex items-center justify-center">
        <img id="lightbox-image" src="" alt="Hình ảnh phóng to" class="max-w-[95vw] max-h-[90vh] transition-transform duration-200" style="transform-origin: center center;">
    </div>
    <div id="lightbox-zoom-controls" class="absolute bottom-5 left-1/2 -translate-x-1/2 flex items-center space-x-2 bg-gray-900 bg-opacity-60 rounded-full px-4 py-2">
        <button id="zoom-out" class="text-white text-3xl font-bold leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-700 rounded-full" aria-label="Thu nhỏ">-</button>
        <span id="zoom-level" class="text-white text-sm font-semibold w-16 text-center" aria-live="polite">100%</span>
        <button id="zoom-in" class="text-white text-3xl font-bold leading-none w-8 h-8 flex items-center justify-center hover:bg-gray-700 rounded-full" aria-label="Phóng to">+</button>
    </div>
  </div>

  <script id="image-config-data" type="application/json">
{
  "company-intro-image": [
    "company-01.jpg",
    "company-02.jpg",
    "company-03.jpg",
    "company-04.jpg",
    "company-05.jpg",
    "company-06.jpg",
    "company-07.jpg",
    "company-08.jpg",
    "company-09.jpg",
    "company-10.jpg"
  ],
  "main-prod-1": [
    "khoe-tron-ven-01.jpg",
    "khoe-tron-ven-02.jpg",
    "khoe-tron-ven-03.jpg",
    "khoe-tron-ven-04.jpg",
    "khoe-tron-ven-05.jpg",
    "khoe-tron-ven-06.jpg",
    "khoe-tron-ven-07.jpg",
    "khoe-tron-ven-08.jpg",
    "khoe-tron-ven-09.jpg",
    "khoe-tron-ven-10.jpg",
    "khoe-tron-ven-11.jpg"
  ],
  "main-prod-2": [
    "khoe-binh-an-01.jpg",
    "khoe-binh-an-02.jpg",
    "khoe-binh-an-03.jpg",
    "khoe-binh-an-04.jpg",
    "khoe-binh-an-05.jpg",
    "khoe-binh-an-06.jpg",
    "khoe-binh-an-07.jpg",
    "khoe-binh-an-08.jpg",
    "khoe-binh-an-09.jpg",
    "khoe-binh-an-10.jpg",
    "khoe-binh-an-11.jpg"
  ],
  "main-prod-3": [
    "vung-tuong-lai-01.jpg",
    "vung-tuong-lai-02.jpg",
    "vung-tuong-lai-03.jpg",
    "vung-tuong-lai-04.jpg",
    "vung-tuong-lai-05.jpg",
    "vung-tuong-lai-06.jpg",
    "vung-tuong-lai-07.jpg",
    "vung-tuong-lai-08.jpg",
    "vung-tuong-lai-09.jpg",
    "vung-tuong-lai-10.jpg",
    "vung-tuong-lai-11.jpg" 
  ],
  "main-prod-4": [
    "an-binh-uu-viet-01.jpg",
    "an-binh-uu-viet-02.jpg",
    "an-binh-uu-viet-03.jpg",
    "an-binh-uu-viet-04.jpg",
    "an-binh-uu-viet-05.jpg",
    "an-binh-uu-viet-06.jpg",
    "an-binh-uu-viet-07.jpg"
  ],
  "main-prod-5": [
    "tron-tam-an-01.jpg",
    "tron-tam-an-02.jpg",
    "tron-tam-an-03.jpg",
    "tron-tam-an-04.jpg",
    "tron-tam-an-05.jpg",
    "tron-tam-an-06.jpg"
  ],
  "rider-prod-1": [
    "bung-gia-luc-01.jpg",
    "bung-gia-luc-02.jpg",
    "bung-gia-luc-03.jpg",
    "bung-gia-luc-04.jpg",
    "bung-gia-luc-05.jpg",
    "bung-gia-luc-06.jpg",
    "bung-gia-luc-07.jpg",
    "bung-gia-luc-08.jpg",
    "bung-gia-luc-09.jpg",
    "bung-gia-luc-10.jpg",
    "bung-gia-luc-11.jpg",
    "bung-gia-luc-12.jpg"
  ],
  "rider-prod-2": [
    "benh-hiem-ngheo-20-01.jpg",
    "benh-hiem-ngheo-20-02.jpg",
    "benh-hiem-ngheo-20-03.jpg",
    "benh-hiem-ngheo-20-04.jpg",
    "benh-hiem-ngheo-20-05.jpg",
    "benh-hiem-ngheo-20-06.jpg",
    "benh-hiem-ngheo-20-07.jpg",
    "benh-hiem-ngheo-20-08.jpg",
    "benh-hiem-ngheo-20-09.jpg",
    "benh-hiem-ngheo-20-10.jpg",
    "benh-hiem-ngheo-20-11.jpg",
    "benh-hiem-ngheo-20-12.jpg",
    "benh-hiem-ngheo-20-13.jpg"
  ],
  "rider-prod-3": [
    "tai-nan-01.jpg",
    "tai-nan-02.jpg",
    "tai-nan-03.jpg",
    "tai-nan-04.jpg",
    "tai-nan-05.jpg",
    "tai-nan-06.jpg",
    "tai-nan-07.jpg",
    "tai-nan-08.jpg"
  ],
  "rider-prod-4": [
    "ho-tro-vien-phi-01.jpg",
    "ho-tro-vien-phi-02.jpg",
    "ho-tro-vien-phi-03.jpg",
    "ho-tro-vien-phi-04.jpg",
    "ho-tro-vien-phi-05.jpg",
    "ho-tro-vien-phi-06.jpg",
    "ho-tro-vien-phi-07.jpg",
    "ho-tro-vien-phi-08.jpg",
    "ho-tro-vien-phi-09.jpg"
  ],
  "rider-prod-5": []
}  
  </script>

  <script>
    const productLinks = {
      'main-prod-1': [
        { text: 'Quy tắc và điều khoản - AIA Khoẻ Trọn Vẹn - Kế hoạch Trọn Đời', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song/aia-khoe-tron-ven/file-pdf/050625-Quy-tac-va-dieu-khoan-Bao-hiem-lien-ket-chung-AIA-Khoe-Tron-Ven-Ke-hoach-Tron-doi.pdf.coredownload.inline.pdf' },
        { text: 'Quy tắc và điều khoản - AIA Khoẻ Trọn Vẹn - Kế hoạch Toàn Diện', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song/aia-khoe-tron-ven/file-pdf/Quy-tac-va-dieu-khoan-Bao-hiem-lien-ket-chung-AIA-Khoe-Tron-Ven-Ke-hoach-Toan-dien.pdf.coredownload.inline.pdf' },
        { text: 'Quy tắc và điều khoản - AIA Khoẻ Trọn Vẹn - Kế hoạch Bền Vững', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song/aia-khoe-tron-ven/file-pdf/Quy-tac-va-dieu-khoan-Bao-hiem-lien-ket-chung-AIA-Khoe-Tron-Ven-Ke-hoach-Ben-vung.pdf.coredownload.inline.pdf' },
        { text: 'Bảng tỷ lệ phí bảo hiểm cơ bản', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song/aia-khoe-tron-ven/file-pdf/Bieu-phi-San-pham-Bao-hiem-lien-ket-chung-AIA-Khoe-Tron-Ven.pdf' }
      ],
      'main-prod-2': [
        { text: 'Quy tắc và điều khoản - AIA - Khoẻ Bình An', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song-va-tiet-kiem/aia-khoe-binh-an/3107-Agency-Quy-tac-va-dieu-khoan-Bao-hiem-lien-ket-chung-AIA-Khoe-Binh-An.pdf' },
        { text: 'Bảng tỷ lệ phí', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song-va-tiet-kiem/aia-khoe-binh-an/3107-Agency%20-%20Bieu-phi-San-pham-Bao-hiem-lien-ket-chung-AIA-Khoe-Binh-An.pdf' }
      ],
      'main-prod-3': [
        { text: 'Quy tắc và điều khoản - AIA - Vững Tương Lai', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song-va-tiet-kiem/aia-vung-tuong-lai/3107-Agency-Quy-tac-va-dieu-khoan-Bao-hiem-lien-ket-chung-AIA-Vung-Tuong-Lai.pdf' },
        { text: 'Bảng tỷ lệ phí', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song-va-tiet-kiem/aia-vung-tuong-lai/3107-Agency%20-Bieu-phi-San-pham-Bao-hiem-lien-ket-chung-AIA-Vung-Tuong-Lai.pdf' }
      ],
      'main-prod-4': [
        { text: 'Quy tắc và điều khoản - An Bình Ưu Việt', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song/an-binh-uu-viet/2025-file/300725-Quy-tac-va-dieu-khoan-bao-hiem-an-binh-uu-viet-mau.pdf' },
        { text: 'Biểu phí sản phẩm', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song/an-binh-uu-viet/2025-file/bieu-phi-bao-hiem-an-binh-uu-viet-cap-nhat-thang-7-2025%20(final).pdf' }
      ],
      'main-prod-5': [
        { text: 'Quy tắc và điều khoản - Sức khoẻ Bùng Gia lực', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/suc-khoe/benh-hiem-ngheo/tron-tam-an/Quy-tac-va-dieu-khoan-Bao-hiem-suc-khoe-Bung-Gia-Luc.pdf' },
        { text: 'Quy tắc và điều khoản - An Bình Ưu Việt', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/suc-khoe/benh-hiem-ngheo/tron-tam-an/Quy-tac-va-dieu-khoan-Bao-hiem-An-Binh-Uu-Viet.pdf' },
        { text: 'Biểu phí', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/suc-khoe/benh-hiem-ngheo/tron-tam-an/170725-Bieu-phi-goi-giai-phap-AIA-Tron-Tam-An.pdf' }
      ],
      'rider-prod-1': [
        { text: 'Quy tắc và điều khoản - Sức khoẻ Bùng Gia Lực', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/suc-khoe/cham-soc-suc-khoe/bung-gia-luc/file-pdf/BHSK-Bung-Gia-Luc-Quy-tac-dieu-khoan-mau-25062024.pdf' },
        { text: 'Biểu phí', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/suc-khoe/cham-soc-suc-khoe/bung-gia-luc/file-pdf/BHSK-Bung-Gia-Luc-Bieu-phi-san-pham-25062024.pdf' }
      ],
      'rider-prod-2': [
        { text: 'Quy tắc và điều khoản - Bệnh hiểm nghèo 2.0', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/suc-khoe/benh-hiem-ngheo/bh-benh-hiem-ngheo-2025/050825-Quy-tac-va-dieu-khoan-Bao-hiem-Toan-dien-Benh-hiem-ngheo-2.0_Update%20STT.pdf' },
        { text: 'Biểu phí', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/suc-khoe/benh-hiem-ngheo/bh-benh-hiem-ngheo-2025/bieu-phi-bao-hiem-toan-dien-benh-hiem-ngheo20.pdf' }
      ],
      'rider-prod-3': [
        { text: 'Quy tắc và điều khoản - Bảo hiểm tai nạn', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/rui-ro-do-tai-nan/bh-tu-vong-va-thuong-tat-do-tai-nan/2025-file/300725-Quy-tac-va-dieu-khoan-bao-hiem-tu-vong-va-thuong-tat-do-tai-nan.pdf' },
        { text: 'Biểu phí', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/rui-ro-do-tai-nan/bh-tu-vong-va-thuong-tat-do-tai-nan/Bieu_phi_san_pham_Bao_hiem_tu_vong_va_thuong_tat_do_tai_nan.pdf' }
      ],
      'rider-prod-4': [
        { text: 'Quy tắc và điều khoản - Hỗ trợ viện phí', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/rui-ro-do-tai-nan/ho-tro-chi-phi-nam-vien-va-phau-thuat-do-tai-nan/300725-Quy-tac-va-dieu-khoan-bao-hiem-ho-tro-chi-phi-nam-vien.pdf' },
        { text: 'Biểu phí', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/suc-khoe/cham-soc-suc-khoe/bao-hiem-ho-tro-chi-phi-nam-vien/BH-Ho-tro-chi-phi-nam-vien-bieu-phi-san-pham-052024.pdf' }
      ],
      'rider-prod-5': [
        { text: 'Quy tắc và điều khoản - Miễn đóng phí 3.0', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song/bao-hiem-mien-thu-phi/2025-file/300725-Quy-tac-va-dieu-khoan-bao-hiem-mien-thu-phi-phien-ban-3.0.pdf' },
        { text: 'Biểu phí', url: 'https://www.aia.com.vn/content/dam/vn-wise/san-pham/bao-ve-cuoc-song/bao-hiem-mien-thu-phi/Bieu_phi_san_pham_bo_sung_mien_thu_phi_phien_ban_3.0.pdf' }
      ]
    };

    function setupAccordion(containerId) {
        const accordionContainer = document.getElementById(containerId);
        if (!accordionContainer) return;

        accordionContainer.querySelectorAll('.accordion-header').forEach(header => {
            const content = document.getElementById(header.getAttribute('aria-controls'));
            if (!content) return;

            header.addEventListener('click', () => {
                const isExpanded = header.getAttribute('aria-expanded') === 'true';

                if (isExpanded) {
                    header.setAttribute('aria-expanded', 'false');
                    content.style.maxHeight = null;
                } else {
                    header.setAttribute('aria-expanded', 'true');
                    
                    if (content.dataset.loaded !== 'true') {
                        loadProductDetails(content.id, content);
                        content.dataset.loaded = 'true';
                    }
                    
                    content.style.maxHeight = content.scrollHeight + 'px';

                    setTimeout(() => {
                      header.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }, 300);
                }
            });
        });
    }

    function loadProductDetails(productId, container) {
        const config = JSON.parse(document.getElementById('image-config-data').textContent);
        const imageFiles = (config[productId] || []).filter(Boolean);
        const links = productLinks[productId] || [];

        if (links.length === 0 && imageFiles.length === 0) {
            container.innerHTML = `
                <div class="p-5 border-t border-gray-200">
                    <p class="text-center text-gray-500 py-4">Chưa có thông tin cho sản phẩm này.</p>
                </div>`;
            return;
        }

        let imagesHtml = '';
        if (imageFiles.length > 0) {
            imagesHtml = `
                <div class="grid grid-cols-1 gap-6">
                    ${imageFiles.map(src => `
                        <div class="image-placeholder bg-gray-200 rounded-lg min-h-[200px] flex justify-center items-center overflow-hidden">
                            <div class="spinner animate-spin rounded-full h-8 w-8 border-b-2 border-red-500"></div>
                            <img data-src="images/${src}" alt="Hình ảnh sản phẩm" class="lazy-image product-image cursor-pointer absolute w-full h-full object-cover opacity-0 transition-opacity duration-500">
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        let linksSectionHtml = '';
        if (links.length > 0) {
            linksSectionHtml = `
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <h4 class="text-lg font-semibold text-gray-700 mb-4">Tài liệu tham khảo</h4>
                    <ul class="space-y-3 list-none p-0">${links.map(link => `
                        <li class="flex items-start">
                            <i class="ri-file-pdf-2-line mr-2 mt-1 text-red-500 flex-shrink-0"></i>
                            <a href="${link.url}" target="_blank" rel="noopener noreferrer" class="text-red-700 hover:underline hover:text-red-900 transition-colors">
                                ${link.text}
                            </a>
                        </li>
                    `).join('')}</ul>
                </div>
            `;
        }

        const collapseButtonHtml = `
            <div class="mt-8 pt-6 text-center border-t border-gray-200">
                <button class="collapse-button text-red-600 border border-red-600 rounded-full px-5 py-2 hover:bg-red-600 hover:text-white transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 inline-flex items-center">
                    Thu gọn
                    <i class="ri-arrow-up-s-line ml-2"></i>
                </button>
            </div>`;

        container.innerHTML = `
            <div class="p-5 border-t border-gray-200">
                ${imagesHtml}
                ${linksSectionHtml}
                ${collapseButtonHtml}
            </div>
        `;
        
        const updateAccordionHeight = () => {
            if (container.style.maxHeight && container.style.maxHeight !== '0px') {
                requestAnimationFrame(() => {
                    container.style.maxHeight = container.scrollHeight + 'px';
                });
            }
        };

        container.querySelectorAll('.lazy-image').forEach(img => {
            const placeholder = img.parentElement;
            const spinner = placeholder.querySelector('.spinner');

            img.onload = () => {
                if (spinner) spinner.style.display = 'none';
                placeholder.classList.remove('bg-gray-200', 'min-h-[200px]', 'flex', 'items-center', 'justify-center');
                img.classList.remove('opacity-0', 'absolute');
                img.classList.add('relative');
                updateAccordionHeight();
            };
            img.onerror = () => {
                placeholder.style.display = 'none';
                updateAccordionHeight();
            };
            img.src = img.dataset.src;
        });

        const collapseButton = container.querySelector('.collapse-button');
        if (collapseButton) {
            collapseButton.addEventListener('click', (e) => {
                e.stopPropagation();
                const header = container.previousElementSibling;
                if (header && header.classList.contains('accordion-header')) {
                    header.click();
                    header.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            });
        }
    }
    
    function loadCompanyIntro() {
        const container = document.getElementById('company-intro-image');
        if (!container) return;
        
        const config = JSON.parse(document.getElementById('image-config-data').textContent);
        const imageFiles = (config['company-intro-image'] || []).filter(Boolean);

        if (imageFiles.length > 0) {
            const imagesHtml = imageFiles.map(file => `
                <div class="image-container-intro">
                    <img src="images/${file}" alt="Hình ảnh giới thiệu" class="rounded-lg shadow-md w-full h-auto product-image cursor-pointer" loading="lazy" onerror="this.parentElement.style.display='none'">
                </div>
            `).join('');
            container.innerHTML = `
                <div class="bg-white rounded-lg shadow-lg overflow-hidden p-5">
                    <div class="grid grid-cols-1 gap-6">${imagesHtml}</div>
                </div>
            `;
        } else {
            container.innerHTML = '';
        }
    }

    function initLightbox() {
        const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightbox-image');
        const closeBtn = document.getElementById('lightbox-close');
        const zoomInBtn = document.getElementById('zoom-in');
        const zoomOutBtn = document.getElementById('zoom-out');
        const zoomLevelSpan = document.getElementById('zoom-level');

        if (!lightbox || !lightboxImage || !closeBtn || !zoomInBtn || !zoomOutBtn) return;
        
        let currentScale = 1;
        let isDragging = false;
        let startX, startY, posX, posY;

        const updateTransform = () => {
            lightboxImage.style.transform = `translate(${posX}px, ${posY}px) scale(${currentScale})`;
            zoomLevelSpan.textContent = `${Math.round(currentScale * 100)}%`;
            if(currentScale > 1) {
                lightboxImage.classList.add('is-zoomed');
            } else {
                lightboxImage.classList.remove('is-zoomed');
            }
        };

        const resetState = () => {
            currentScale = 1;
            isDragging = false;
            posX = 0;
            posY = 0;
            updateTransform();
        };

        const openLightbox = (imgElement) => {
            lightboxImage.src = imgElement.src;
            lightbox.classList.remove('hidden');
            lightbox.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
            resetState();
        };

        const closeLightbox = () => {
            lightbox.classList.add('hidden');
            lightbox.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
            lightboxImage.src = ''; // Clear src to stop loading if in progress
        };
        
        document.body.addEventListener('click', (e) => {
            if (e.target.classList.contains('product-image')) {
                openLightbox(e.target);
            }
        });

        closeBtn.addEventListener('click', closeLightbox);
        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) { // Close only if clicking the background
                closeLightbox();
            }
        });

        zoomInBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            currentScale = Math.min(currentScale * 1.2, 5); // Max zoom 500%
            updateTransform();
        });

        zoomOutBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            currentScale = Math.max(currentScale / 1.2, 0.5); // Min zoom 50%
            if(currentScale <= 1) { // Reset position when zooming out to fit
                 posX = 0;
                 posY = 0;
            }
            updateTransform();
        });

        lightboxImage.addEventListener('mousedown', (e) => {
            if (currentScale > 1) {
                e.preventDefault();
                isDragging = true;
                startX = e.clientX - posX;
                startY = e.clientY - posY;
                lightboxImage.classList.add('is-dragging');
            }
        });

        window.addEventListener('mousemove', (e) => {
            if (isDragging) {
                e.preventDefault();
                posX = e.clientX - startX;
                posY = e.clientY - startY;
                updateTransform();
            }
        });

        window.addEventListener('mouseup', () => {
            isDragging = false;
            lightboxImage.classList.remove('is-dragging');
        });

        lightbox.addEventListener('wheel', (e) => {
           if (!e.target.closest('#lightbox-zoom-controls')) {
             e.preventDefault();
             const zoomFactor = 1.1;
             if (e.deltaY < 0) { // Zoom in
                 currentScale = Math.min(currentScale * zoomFactor, 5);
             } else { // Zoom out
                 currentScale = Math.max(currentScale / zoomFactor, 0.5);
             }
             if(currentScale <= 1) {
                 posX = 0;
                 posY = 0;
             }
             updateTransform();
           }
        });
    }


    window.addEventListener('DOMContentLoaded', () => {
        loadCompanyIntro();
        setupAccordion('main-products-accordion');
        setupAccordion('rider-products-accordion');
        initLightbox();
    });
  </script>
</body>
</html>
